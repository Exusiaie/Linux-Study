# 线程池

#### 线程池是什么

**线程池（Thread Pool）**是一种基于**池化思想**管理线程的工具，经常出现在多线程服务器中，如MySQL。

**线程过多会带来额外的开销**，其中包括创建销毁线程的开销、调度线程的开销等等，同时也降低了计算机的整体性能。**线程池维护多个线程，等待监督管理者分配可并发执行的任务**。这种做法，一方面避免了处理任务时创建销毁线程开销的代价，另一方面避免了线程数量膨胀导致的过分调度问题，保证了对内核的充分利用。

![image-20250730143803008](.\assets\Snipaste_2025-07-30_14-39-14.png)

使用线程池可以带来一系列好处：

-   **降低资源消耗（系统资源）**：通过池化技术重复利用已创建的线程，降低线程创建和销毁造成的损耗。
-   **提高线程的可管理性（系统资源）**：线程是稀缺资源，如果无限制创建，不仅会消耗系统资源，还会因为线程的不合理分布导致资源调度失衡，降低系统的稳定性。使用线程池可以进行统一的分配、调优和监控。
-   **提高响应速度（任务响应）**：任务到达时，无需等待线程创建即可立即执行。
-   **提供更多更强大的功能（功能扩展）**：线程池具备可拓展性，允许开发人员向其中增加更多的功能。比如延时定时线程池ScheduledThreadPoolExecutor，就允许任务延期执行或定期执行。

#### 线程池解决的问题

线程池解决的核心问题就是资源管理问题。**在并发环境下，系统不能够确定在任意时刻中，有多少任务需要执行，有多少资源需要投入**。这种不确定性将带来以下若干问题：

-   **频繁申请/销毁资源和调度资源**，将带来额外的消耗，可能会非常巨大。
-   **对资源无限申请缺少抑制手段**，易引发系统资源耗尽的风险。
-   **系统无法合理管理内部的资源分布**，会降低系统的稳定性。







# 手撕线程池

